<srcSchema _cs="Workflows (cus)" 
           desc="Custom workflow activity definitions" entitySchema="xtk:srcSchema"
           extendedSchema="xtk:workflow" img="xtk:workflow.png" label="Workflows"
           labelSingular="Workflow" name="workflow"
           namespace="cus" xtkschema="xtk:srcSchema">

    <!-- Example ENUM definition to use in a custom activity -->
    <enumeration name="activityAction">
        <value name="Query" value="query"/>
        <value name="Update" value="update"/>
        <value name="Delete" value="delete"/>
    </enumeration>

    <element img="cus:customActivity48x48.png" label="Custom Activity" name="customActivity"
             template="xtk:workflow:activity">
        <attribute default="'cus:customActivity48x48.png'" name="img"/>
        <!-- Custom library underpinning the activity -->
        <attribute default="'cus:customActivity.js'" name="library"/>
        <attribute default="false" name="andJoin" type="boolean"/>
        <attribute default="true" name="distributable" type="boolean"/>
        <attribute default="true" name="shouldSync" type="boolean"/>

        <!-- Custom properties -->
        <attribute label="Template" name="label" type="string"/>

        <!-- Example activity parameters/properties -->

        <!-- Example of a debug toggle -->
        <attribute label="Enabled Debugging" name="enableDebugging" type="bool"/>

        <!-- Example string attribute -->
        <attribute label="Message Text" name="messageText" type="string"/>

        <!-- Example number attribute -->
        <attribute label="Message Text Length" name="messageTextLength" type="long"/>

        <!-- Example of an ENUM attribute -->
        <attribute enum="activityAction" label="Activity Action" name="activityAction"
                   type="byte"/>

        <!-- Example used in querying the data context -->
        <attribute label="Query Attribute Alias" name="queryAttributeAlias" type="string"/>

        <!-- Example of 0:m parameters -->
        <element label="Pairs List" name="pairsList">
            <element name="pairs" unbound="true">
                <key name="label">
                    <keyfield xpath="@paramLabel"/>
                </key>
                <attribute default="New" label="Parameter Label" name="paramLabel" type="string"/>
                <attribute label="Parameter Value" name="paramValue" type="string"/>
            </element>
        </element>

        <!-- OK and Error transitions -->
        <element name="transitions">
            <element name="done" template="xtk:workflow:transition">
                <attribute name="label" translatedDefault="'Ok'"/>
                <attribute default="true" name="enabled"/>
            </element>
            <element name="error" template="xtk:workflow:transition">
                <attribute name="label" translatedDefault="'Error'"/>
                <attribute default="true" name="enabled"/>
            </element>
        </element>
    </element>

    <element img="xtk:workflow.png" label="workflow" name="workflow">
        <element name="activities" xml="true">
            <element name="customActivity" ref="customActivity" unbound="true"/>
        </element>
    </element>
</srcSchema>